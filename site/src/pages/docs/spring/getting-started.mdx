---
layout: ../../../layouts/DocsLayout.astro
title: Spring Getting Started
description: Step-by-step guide to integrating Memory Service with your Spring Boot AI agent.
---
import { Code } from 'astro:components';
import { PROJECT_VERSION } from '../../../config';
import CodeFromFile from '../../../components/CodeFromFile.astro';
import TestScenario from '../../../components/TestScenario.astro';
import CurlTest from '../../../components/CurlTest.astro';

This guide walks you through integrating Memory Service with a Spring Boot AI agent. You'll start with basic chat memory and can progressively add features in the follow-up guides.

Make sure you've completed the [prerequisites](/docs/spring/) before starting this guide.

## Step 1: Create a Simple Spring AI App

**Starting checkpoint**: View the complete code at [spring/examples/doc-checkpoints/01-basic-agent](https://github.com/chirino/memory-service/tree/main/spring/examples/doc-checkpoints/01-basic-agent)

First, let's create a new Spring Boot application. Use [Spring Initializr](https://start.spring.io/#!type=maven-project&language=java&platformVersion=3.5.10&packaging=jar&configurationFileFormat=properties&jvmVersion=21&groupId=com.example&artifactId=demo&name=demo&description=Demo%20project%20for%20Spring%20Boot&packageName=com.example.demo&dependencies=spring-ai-openai,web) to setup the project.
Make sure to use Spring Boot 3.5 as that the latest version supported by Spring AI and add the OpenAI and Spring Web dependencies.

Once you download the starter project extract it and open it in your favorite IDE.

```bash
unzip demo.zip
cd demo
```


Create a simple REST controller:

<CodeFromFile
  file="spring/examples/doc-checkpoints/01-basic-agent/src/main/java/com/example/demo/ChatController.java"
  lang="java"
/>

Configure the server port and OpenAI credentials in `application.properties`:

<CodeFromFile
  file="spring/examples/doc-checkpoints/01-basic-agent/src/main/resources/application.properties"
  lang="properties"
/>

<TestScenario checkpoint="spring/examples/doc-checkpoints/01-basic-agent">

Run your agent:

```bash
export OPENAI_API_KEY=your-api-key
```
```bash
./mvnw spring-boot:run
```

Test it with curl:

<CurlTest steps={`
Then the response status should be 200
And the response body should be text:
"""
Hello Hiram! I'm an AI language model created by OpenAI, here to help answer questions and provide information on a wide range of topics. How can I assist you today?
"""
`}>

```bash
curl -NsSfX POST http://localhost:9090/chat \
  -H "Content-Type: application/json" \
  -d '"Hi, I'\''m Hiram, who are you?"'
```

</CurlTest>

**Expected**: The agent responds but has no memory of your name.

<CurlTest steps={`
Then the response status should be 200
And the response should not contain "Hiram"
`}>

```bash
curl -NsSfX POST http://localhost:9090/chat \
  -H "Content-Type: application/json" \
  -d '"Who am I?"'
```

</CurlTest>

</TestScenario>

This works, but you may have noticed that the agent has no memory. Each request is independent. Let's add conversation memory.

## Step 2: Add Memory Service Starter

**Starting checkpoint**: View the complete code at [spring/examples/doc-checkpoints/02-with-memory](https://github.com/chirino/memory-service/tree/main/spring/examples/doc-checkpoints/02-with-memory)

Add the Memory Service Spring Boot starter and OAuth2 resource server dependencies to your `pom.xml`:

<Code lang="xml" code={`<dependency>
    <groupId>io.github.chirino.memory-service</groupId>
    <artifactId>memory-service-spring-boot-starter</artifactId>
    <version>${PROJECT_VERSION}</version>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-oauth2-resource-server</artifactId>
</dependency>
`} />

Start the Memory Service in Docker Compose following the [Getting Started](/docs/getting-started/) guide.

Configure the connection to the Memory Service in `application.properties`:

```properties
memory-service.client.base-url=http://localhost:8082
memory-service.client.api-key=agent-api-key-1
memory-service.client.log-requests=true
```

Configure OAuth2 in `application.properties`. The client configuration supports browser-based login, while the resource server configuration enables Bearer token authentication for API clients:

```properties
# OAuth2 client configuration (for browser-based login)
spring.security.oauth2.client.provider.memory-service-client.issuer-uri=http://localhost:8081/realms/memory-service
spring.security.oauth2.client.registration.memory-service-client.client-id=memory-service-client
spring.security.oauth2.client.registration.memory-service-client.client-secret=change-me
spring.security.oauth2.client.registration.memory-service-client.scope=openid,profile,email
spring.security.oauth2.client.registration.memory-service-client.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.memory-service-client.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

# OAuth2 resource server configuration (for Bearer token authentication)
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8081/realms/memory-service
```

Configure security. The configuration supports both browser-based OAuth2 login and Bearer token authentication:

<CodeFromFile
  file="spring/examples/doc-checkpoints/02-with-memory/src/main/java/com/example/demo/SecurityConfig.java"
  lang="java"
/>

Now let's update the controller to use chat memory. The Memory Service starter provides `MemoryServiceChatMemoryRepositoryBuilder` which you can use to build a `MessageWindowChatMemory`:

<CodeFromFile
  file="spring/examples/doc-checkpoints/02-with-memory/src/main/java/com/example/demo/ChatController.java"
  lang="java"
/>

<TestScenario checkpoint="spring/examples/doc-checkpoints/02-with-memory">

Run your agent again:

```bash
export OPENAI_API_KEY=your-api-key
./mvnw spring-boot:run
```

Make sure you define a shell function that can get the bearer token for the bob user:

```bash
function get-token() {
  curl -sSfX POST http://localhost:8081/realms/memory-service/protocol/openid-connect/token \
    -H "Content-Type: application/x-www-form-urlencoded" \
    -d "client_id=memory-service-client" \
    -d "client_secret=change-me" \
    -d "grant_type=password" \
    -d "username=bob" \
    -d "password=bob" \
    | jq -r '.access_token'
}
```

Test it with curlâ€”now with conversation memory:

<CurlTest steps={`
Then the response status should be 200
And the response body should be text:
"""
Hello Hiram! I'm an AI assistant here to help you with any questions or information you might need. How can I assist you today?
"""
`}>

```bash
curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $(get-token)" \
  -d '"Hi, I'\''m Hiram, who are you?"'
```

</CurlTest>

**Expected**: The agent now remembers your name from the previous message.

<CurlTest steps={`
Then the response status should be 200
And the response should contain "Hiram"
`}>

```bash
curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $(get-token)" \
  -d '"Who am I?"'
```

</CurlTest>

</TestScenario>

The agent now remembers context within the same conversation ID!

If you browse to the demo agent app at [http://localhost:8080/](http://localhost:8080/), you will see that a conversation has been created with the ID `3579aac5-c86e-4b67-bbea-6ec1a3644942`.
But it won't show any messages.  That's because we are not yet storing what we call the history of the conversation.  The only thing being stored is the agent memory, and
that's not typically what you want to display to a user in a UI.

## Next Steps

Continue to [Conversation History](/docs/spring/conversation-history/) to learn how to:
- Record conversation history for frontend display
- Expose conversation APIs (messages, listing)
- Build a complete chat UI experience

Or jump ahead to:
- [Conversation Forking](/docs/spring/conversation-forking/) - Branch conversations to explore alternative paths
- [Response Resumption](/docs/spring/response-resumption/) - Streaming responses with resume and cancel support

## Complete Example

For a complete working example, see the `spring/examples/chat-spring` directory in the repository.
