[
  {
    "checkpoint": "spring/examples/doc-checkpoints/06-sharing",
    "sourceFile": "/docs/spring/sharing/",
    "scenarios": [
      {
        "bash": "curl -sSfX POST http://localhost:9090/chat/a1b2c3d4-e5f6-4789-abcd-ef0123456789 \\\n  -H \"Content-Type: text/plain\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d \"Hello, starting a conversation for sharing tests.\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200"
        ]
      },
      {
        "bash": "# As bob (owner), list members of the conversation\ncurl -sSfX GET http://localhost:9090/v1/conversations/a1b2c3d4-e5f6-4789-abcd-ef0123456789/memberships \\\n  -H \"Authorization: Bearer $(get-token bob bob)\" | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be json:",
          "\"\"\"",
          "{",
          "\"data\": [",
          "{",
          "\"conversationId\": \"a1b2c3d4-e5f6-4789-abcd-ef0123456789\",",
          "\"userId\": \"bob\",",
          "\"accessLevel\": \"owner\",",
          "\"createdAt\": \"%{response.body.data[0].createdAt}\"",
          "}",
          "]",
          "}",
          "\"\"\""
        ]
      },
      {
        "bash": "# Share conversation with alice as a writer\ncurl -sSfX POST http://localhost:9090/v1/conversations/a1b2c3d4-e5f6-4789-abcd-ef0123456789/memberships \\\n  -H \"Authorization: Bearer $(get-token bob bob)\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"userId\": \"alice\",\n    \"accessLevel\": \"writer\"\n  }' | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 201",
          "And the response body should be json:",
          "\"\"\"",
          "{",
          "\"conversationId\": \"a1b2c3d4-e5f6-4789-abcd-ef0123456789\",",
          "\"userId\": \"alice\",",
          "\"accessLevel\": \"writer\",",
          "\"createdAt\": \"%{response.body.createdAt}\"",
          "}",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -sSfX POST http://localhost:9090/chat/a1b2c3d4-e5f6-4789-abcd-ef0123456789 \\\n  -H \"Authorization: Bearer $(get-token alice alice)\" \\\n  -H \"Content-Type: text/plain\" \\\n  -d \"Hi from Alice!\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200"
        ]
      }
    ]
  },
  {
    "checkpoint": "quarkus/examples/doc-checkpoints/03-with-history",
    "sourceFile": "/docs/quarkus/conversation-history/",
    "scenarios": [
      {
        "bash": "function get-token() {\n  curl -sSfX POST http://localhost:8081/realms/memory-service/protocol/openid-connect/token \\\n    -H \"Content-Type: application/x-www-form-urlencoded\" \\\n    -d \"client_id=memory-service-client\" \\\n    -d \"client_secret=change-me\" \\\n    -d \"grant_type=password\" \\\n    -d \"username=bob\" \\\n    -d \"password=bob\" \\\n    | jq -r '.access_token'\n}",
        "expectations": [],
        "customSteps": []
      },
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Content-Type: text/plain\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d \"Give me a random number between 1 and 100.\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response should match pattern \"\\d+\""
        ]
      },
      {
        "bash": "curl -sSfX GET http://localhost:9090/v1/conversations/3579aac5-c86e-4b67-bbea-6ec1a3644942/ \\\n  -H \"Authorization: Bearer $(get-token)\" | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be json:",
          "\"\"\"",
          "{",
          "\"id\": \"3579aac5-c86e-4b67-bbea-6ec1a3644942\",",
          "\"title\": \"%{response.body.title}\",",
          "\"ownerUserId\": \"bob\",",
          "\"createdAt\": \"%{response.body.createdAt}\",",
          "\"updatedAt\": \"%{response.body.updatedAt}\",",
          "\"accessLevel\": \"owner\"",
          "}",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -sSfX GET http://localhost:9090/v1/conversations/3579aac5-c86e-4b67-bbea-6ec1a3644942/entries \\\n  -H \"Authorization: Bearer $(get-token)\" | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be json:",
          "\"\"\"",
          "{",
          "\"data\": [",
          "{",
          "\"id\": \"%{response.body.data[0].id}\",",
          "\"conversationId\": \"3579aac5-c86e-4b67-bbea-6ec1a3644942\",",
          "\"userId\": \"bob\",",
          "\"channel\": \"history\",",
          "\"contentType\": \"history\",",
          "\"content\": [{\"role\": \"USER\", \"text\": \"Give me a random number between 1 and 100.\"}],",
          "\"createdAt\": \"%{response.body.data[0].createdAt}\"",
          "},",
          "{",
          "\"id\": \"%{response.body.data[1].id}\",",
          "\"conversationId\": \"3579aac5-c86e-4b67-bbea-6ec1a3644942\",",
          "\"userId\": \"bob\",",
          "\"channel\": \"history\",",
          "\"contentType\": \"history\",",
          "\"content\": [{\"role\": \"AI\", \"text\": \"%{response.body.data[1].content[0].text}\"}],",
          "\"createdAt\": \"%{response.body.data[1].createdAt}\"",
          "}",
          "]",
          "}",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -sSfX GET http://localhost:9090/v1/conversations \\\n  -H \"Authorization: Bearer $(get-token)\" | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be json:",
          "\"\"\"",
          "{",
          "\"data\": [",
          "{",
          "\"id\": \"%{response.body.data[0].id}\",",
          "\"title\": \"%{response.body.data[0].title}\",",
          "\"ownerUserId\": \"bob\",",
          "\"createdAt\": \"%{response.body.data[0].createdAt}\",",
          "\"updatedAt\": \"%{response.body.data[0].updatedAt}\",",
          "\"accessLevel\": \"owner\"",
          "},",
          "{",
          "\"id\": \"%{response.body.data[1].id}\",",
          "\"title\": \"%{response.body.data[1].title}\",",
          "\"ownerUserId\": \"bob\",",
          "\"createdAt\": \"%{response.body.data[1].createdAt}\",",
          "\"updatedAt\": \"%{response.body.data[1].updatedAt}\",",
          "\"accessLevel\": \"owner\"",
          "}",
          "]",
          "}",
          "\"\"\""
        ]
      }
    ]
  },
  {
    "checkpoint": "quarkus/examples/doc-checkpoints/01-basic-agent",
    "sourceFile": "/docs/quarkus/getting-started/",
    "scenarios": [
      {
        "bash": "export OPENAI_API_KEY=your-api-key",
        "expectations": [],
        "customSteps": []
      },
      {
        "bash": "./mvnw quarkus:dev",
        "expectations": [],
        "customSteps": []
      },
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat \\\n  -H \"Content-Type: text/plain\" \\\n  -d \"Hi, I'm Hiram, who are you?\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be text:",
          "\"\"\"",
          "I am Claude, an AI assistant created by Anthropic. I'm here to help answer questions and have conversations on a wide variety of topics. How can I assist you today?",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat \\\n  -H \"Content-Type: text/plain\" \\\n  -d \"Who am I?\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response should not contain \"Hiram\""
        ]
      }
    ]
  },
  {
    "checkpoint": "quarkus/examples/doc-checkpoints/02-with-memory",
    "sourceFile": "/docs/quarkus/getting-started/",
    "scenarios": [
      {
        "bash": "export OPENAI_API_KEY=your-api-key\n./mvnw quarkus:dev",
        "expectations": [],
        "customSteps": []
      },
      {
        "bash": "function get-token() {\n  curl -sSfX POST http://localhost:8081/realms/memory-service/protocol/openid-connect/token \\\n    -H \"Content-Type: application/x-www-form-urlencoded\" \\\n    -d \"client_id=memory-service-client\" \\\n    -d \"client_secret=change-me\" \\\n    -d \"grant_type=password\" \\\n    -d \"username=bob\" \\\n    -d \"password=bob\" \\\n    | jq -r '.access_token'\n}",
        "expectations": [],
        "customSteps": []
      },
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Content-Type: text/plain\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d \"Hi, I'm Hiram, who are you?\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be text:",
          "\"\"\"",
          "Hi Hiram! I'm an AI created to help answer questions and provide information. How can I assist you today?",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Content-Type: text/plain\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d \"Who am I?\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response should contain \"Hiram\""
        ]
      }
    ]
  },
  {
    "checkpoint": "quarkus/examples/doc-checkpoints/05-response-resumption",
    "sourceFile": "/docs/quarkus/response-resumption/",
    "scenarios": [
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Content-Type: text/plain\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d \"Write a 4 paragraph story about a cat.\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response should match pattern \"\\w+\""
        ]
      }
    ]
  },
  {
    "checkpoint": "quarkus/examples/doc-checkpoints/06-sharing",
    "sourceFile": "/docs/quarkus/sharing/",
    "scenarios": [
      {
        "bash": "curl -sSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Content-Type: text/plain\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d \"Hello, starting a conversation for sharing tests.\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200"
        ]
      },
      {
        "bash": "# As bob (owner), list members of the conversation\ncurl -sSfX GET http://localhost:9090/v1/conversations/3579aac5-c86e-4b67-bbea-6ec1a3644942/memberships \\\n  -H \"Authorization: Bearer $(get-token bob bob)\" | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be json:",
          "\"\"\"",
          "{",
          "\"data\": [",
          "{",
          "\"conversationId\": \"3579aac5-c86e-4b67-bbea-6ec1a3644942\",",
          "\"userId\": \"bob\",",
          "\"accessLevel\": \"owner\",",
          "\"createdAt\": \"%{response.body.data[0].createdAt}\"",
          "}",
          "]",
          "}",
          "\"\"\""
        ]
      },
      {
        "bash": "# Share conversation with alice as a writer\ncurl -sSfX POST http://localhost:9090/v1/conversations/3579aac5-c86e-4b67-bbea-6ec1a3644942/memberships \\\n  -H \"Authorization: Bearer $(get-token bob bob)\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"userId\": \"alice\",\n    \"accessLevel\": \"writer\"\n  }' | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 201",
          "And the response body should be json:",
          "\"\"\"",
          "{",
          "\"conversationId\": \"3579aac5-c86e-4b67-bbea-6ec1a3644942\",",
          "\"userId\": \"alice\",",
          "\"accessLevel\": \"writer\",",
          "\"createdAt\": \"%{response.body.createdAt}\"",
          "}",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -sSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Authorization: Bearer $(get-token alice alice)\" \\\n  -H \"Content-Type: text/plain\" \\\n  -d \"Hi from Alice!\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200"
        ]
      }
    ]
  },
  {
    "checkpoint": "spring/examples/doc-checkpoints/03-with-history",
    "sourceFile": "/docs/spring/conversation-history/",
    "scenarios": [
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d \"Give me a random number between 1 and 100.\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be text:",
          "\"\"\"",
          "Sure! Here's a random number between 1 and 100: **42**.",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -sSfX GET http://localhost:9090/v1/conversations/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Authorization: Bearer $(get-token)\" | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be json:",
          "\"\"\"",
          "{",
          "\"id\": \"3579aac5-c86e-4b67-bbea-6ec1a3644942\",",
          "\"title\": \"%{response.body.title}\",",
          "\"ownerUserId\": \"bob\",",
          "\"createdAt\": \"%{response.body.createdAt}\",",
          "\"updatedAt\": \"%{response.body.updatedAt}\",",
          "\"lastMessagePreview\": null,",
          "\"accessLevel\": \"owner\",",
          "\"forkedAtEntryId\": null,",
          "\"forkedAtConversationId\": null",
          "}",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -sSfX GET http://localhost:9090/v1/conversations/3579aac5-c86e-4b67-bbea-6ec1a3644942/entries \\\n  -H \"Authorization: Bearer $(get-token)\" | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response should contain \"Give me a random number\"",
          "And the response should contain \"history\""
        ]
      },
      {
        "bash": "curl -sSfX GET http://localhost:9090/v1/conversations \\\n  -H \"Authorization: Bearer $(get-token)\" | jq",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response should contain \"3579aac5-c86e-4b67-bbea-6ec1a3644942\"",
          "And the response should contain \"owner\"",
          "And the response should contain \"bob\""
        ]
      }
    ]
  },
  {
    "checkpoint": "spring/examples/doc-checkpoints/01-basic-agent",
    "sourceFile": "/docs/spring/getting-started/",
    "scenarios": [
      {
        "bash": "export OPENAI_API_KEY=your-api-key",
        "expectations": [],
        "customSteps": []
      },
      {
        "bash": "./mvnw spring-boot:run",
        "expectations": [],
        "customSteps": []
      },
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat \\\n  -H \"Content-Type: application/json\" \\\n  -d '\"Hi, I'\\''m Hiram, who are you?\"'",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be text:",
          "\"\"\"",
          "Hello Hiram! I'm an AI language model created by OpenAI, here to help answer questions and provide information on a wide range of topics. How can I assist you today?",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat \\\n  -H \"Content-Type: application/json\" \\\n  -d '\"Who am I?\"'",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response should not contain \"Hiram\""
        ]
      }
    ]
  },
  {
    "checkpoint": "spring/examples/doc-checkpoints/02-with-memory",
    "sourceFile": "/docs/spring/getting-started/",
    "scenarios": [
      {
        "bash": "export OPENAI_API_KEY=your-api-key\n./mvnw spring-boot:run",
        "expectations": [],
        "customSteps": []
      },
      {
        "bash": "function get-token() {\n  curl -sSfX POST http://localhost:8081/realms/memory-service/protocol/openid-connect/token \\\n    -H \"Content-Type: application/x-www-form-urlencoded\" \\\n    -d \"client_id=memory-service-client\" \\\n    -d \"client_secret=change-me\" \\\n    -d \"grant_type=password\" \\\n    -d \"username=bob\" \\\n    -d \"password=bob\" \\\n    | jq -r '.access_token'\n}",
        "expectations": [],
        "customSteps": []
      },
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d '\"Hi, I'\\''m Hiram, who are you?\"'",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response body should be text:",
          "\"\"\"",
          "Hello Hiram! I'm an AI assistant here to help you with any questions or information you might need. How can I assist you today?",
          "\"\"\""
        ]
      },
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d '\"Who am I?\"'",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response should contain \"Hiram\""
        ]
      }
    ]
  },
  {
    "checkpoint": "spring/examples/doc-checkpoints/05-response-resumption",
    "sourceFile": "/docs/spring/response-resumption/",
    "scenarios": [
      {
        "bash": "curl -NsSfX POST http://localhost:9090/chat/3579aac5-c86e-4b67-bbea-6ec1a3644942 \\\n  -H \"Content-Type: text/plain\" \\\n  -H \"Authorization: Bearer $(get-token)\" \\\n  -d \"Write a 4 paragraph story about a cat.\"",
        "expectations": [],
        "customSteps": [
          "Then the response status should be 200",
          "And the response should match pattern \"\\w+\""
        ]
      }
    ]
  }
]