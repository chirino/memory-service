# Set a dummy OpenAI API key for tests (not actually used in these tests)
quarkus.langchain4j.openai.api-key=${OPENAI_API_KEY:test-openai-key}

# Configure REST client to use dynamic test server URL
# This will be overridden by the test to use the actual test server URL
#openapi_yml/mp-rest/url=${test.url:http://localhost:8081}

# Configure AgentConversationsApi REST client to use dynamic test server URL
# The ${test.url} property is automatically set by Quarkus to the test server URL
quarkus.rest-client.memory-service-client.url=${test.url:http://localhost:8081}
quarkus.oidc.enabled=true

# Test API keys (can be used in tests that exercise API key paths)
%test.memory-service.api-keys.test-agent=test-agent-key
%test.memory-service.api-keys.agent-b=test-agent-key-b
%test.quarkus.oidc.application-type=service
%test.memory-service.vector.type=pgvector

# Pre-configure Keycloak Dev Services users for testing
# Format: username=password (users are created with their username as password by default)
%test.quarkus.keycloak.devservices.users.alice=alice
%test.quarkus.keycloak.devservices.users.bob=bob
%test.quarkus.keycloak.devservices.users.charlie=charlie
%test.quarkus.keycloak.devservices.users.dave=dave

# Ensure gRPC tests talk to the in-process gRPC server
%test.quarkus.grpc.server.enabled=true
%test.quarkus.grpc.server.use-separate-server=false
%test.quarkus.grpc.server.port=8081
%test.quarkus.grpc.server.test-port=8081
%test.quarkus.grpc.server.host=localhost

# Suppress verbose logging during tests - only show errors
%test.quarkus.log.level=ERROR
%test.quarkus.log.category."io.github.chirino.memory".level=ERROR
%test.quarkus.log.category."io.github.chirino.memory.response".level=INFO
%test.quarkus.log.category."io.quarkus".level=ERROR
%test.quarkus.log.category."org.jboss".level=ERROR
%test.quarkus.log.console.enable=true
%test.quarkus.log.console.format=%d{HH:mm:ss.SSS} %-5p [%c{2.}] %s%e%n
