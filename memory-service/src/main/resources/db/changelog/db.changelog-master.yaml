databaseChangeLog:
  - changeSet:
      id: 1-initial-schema
      author: memory-service
      changes:
        - sqlFile:
            path: db/schema.sql
            relativeToChangelogFile: false
  - changeSet:
      id: 2-pgvector-schema
      author: memory-service
      preConditions:
        - onFail: MARK_RAN
        - onError: MARK_RAN
        - dbms:
            type: postgresql
        - sqlCheck:
            expectedResult: 1
            sql: SELECT CASE WHEN EXISTS (SELECT 1 FROM pg_available_extensions WHERE name = 'vector') THEN 1 ELSE 0 END
      changes:
        - sqlFile:
            path: db/pgvector-schema.sql
            relativeToChangelogFile: false
  - changeSet:
      id: 3-attachment-status
      author: memory-service
      changes:
        - sqlFile:
            path: db/changelog/003-attachment-status.sql
            relativeToChangelogFile: false
  - changeSet:
      id: 4-organizations-teams
      author: memory-service
      changes:
        - sqlFile:
            path: db/changelog/004-organizations-teams.sql
            relativeToChangelogFile: false
