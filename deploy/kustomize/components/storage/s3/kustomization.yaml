apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

# Configures memory-service for external S3 storage.
# Users must override the memory-service-secret with real AWS credentials
# and optionally add QUARKUS_S3_ENDPOINT_OVERRIDE, QUARKUS_S3_AWS_REGION
# to the memory-service-config ConfigMap in their overlay.

configMapGenerator:
  - name: memory-service-config
    behavior: merge
    literals:
      - MEMORY_SERVICE_ATTACHMENTS_KIND=s3
      - MEMORY_SERVICE_ATTACHMENTS_S3_BUCKET=memory-service-attachments
      - MEMORY_SERVICE_ATTACHMENTS_S3_DIRECT_DOWNLOAD=true

secretGenerator:
  - name: memory-service-secret
    behavior: merge
    literals:
      - AWS_ACCESS_KEY_ID=CHANGEME
      - AWS_SECRET_ACCESS_KEY=CHANGEME
